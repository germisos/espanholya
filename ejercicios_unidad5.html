<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Ejercicios Unidad 5 ‚Äì Verbos con cambio voc√°lico</title>
<script src="menu.js" defer></script>  
<style>
    body {
        font-family: Arial, sans-serif;
        margin: 0;
        padding: 0;
        background-color: #f4f4f9;
        color: #333;
    }

    /* Contenedor principal */
    .lesson-container {
        max-width: 900px;
        margin: 80px auto 25px auto;
        padding: 25px;
        background: white;
        border-radius: 12px;
        box-shadow: 0 6px 15px rgba(0,0,0,0.15);
    }

    h2, h3 {
        color: #007bff;
        border-bottom: 2px solid #007bff;
        padding-bottom: 4px;
        margin-top: 30px;
    }

    /* Estilos para las listas de conjugaci√≥n (la parte interactiva) */
    .verb-conjugation-list {
        list-style: none;
        padding: 0;
    }

    .verb-conjugation-list li {
        margin: 10px 0;
        display: flex;
        align-items: center;
        gap: 15px;
        font-size: 1.1em;
    }

    /* Estilos para las listas de opci√≥n m√∫ltiple */
    .exercise-list-multiple-choice {
        list-style: none;
        padding: 0;
    }

    .exercise-list-multiple-choice li {
        margin: 25px 0; /* M√°s espacio entre frases */
        padding: 15px;
        border: 1px solid #ddd;
        border-radius: 8px;
        background-color: #fff;
    }
    
    .exercise-list-multiple-choice li p {
        margin-top: 0;
        font-weight: bold;
    }

    /* Contenedor de las opciones para separarlas de la frase */
    .options-container {
        display: flex;
        flex-wrap: wrap; /* Para que bajen en pantallas peque√±as */
        gap: 10px; /* Espacio entre los botones */
        margin-top: 10px;
        margin-bottom: 10px;
    }

    /* Estilo para los botones de Opci√≥n M√∫ltiple (Azul) */
.mc-button {
    border: none; /* Quitamos el borde para un look m√°s limpio */
    border-radius: 5px;
    padding: 10px 15px;
    cursor: pointer;
    color: white; /* Letra blanca */
    background-color: #007bff; /* AZUL PRINCIPAL */
    font-weight: bold;
    font-size: 1em;
    min-width: 90px;
    transition: background-color 0.2s;
}

.mc-button:hover:not(:disabled) {
    background-color: #0056b3; /* Azul m√°s oscuro al pasar el rat√≥n */
}

    /* Estados de correcci√≥n */
    .mc-button.correct {
        background-color: #d4edda; /* Verde claro */
        color: #155724;
        border-color: #c3e6cb;
    }

    .mc-button.incorrect {
        background-color: #f8d7da; /* Rojo claro */
        color: #721c24;
        border-color: #f5c6cb;
    }

    .mc-button:disabled {
        cursor: default;
        opacity: 0.7;
    }

    .explanation {
        font-style: italic;
        color: #555;
        margin-bottom: 20px;
    }
    
    /* Botones de audio (O√≠r - AZUL) - Mantenidos por la secci√≥n anterior */
    .play-button { 
        border: none;
        border-radius: 5px;
        padding: 8px 12px;
        cursor: pointer;
        color: white;
        font-weight: bold;
        background-color: #007bff; 
        font-size: 1em;
        flex-shrink: 0;
    }
    .play-button:hover {
        background-color: #0056b3; 
    }
    .play-button::before {
        content: "üîä O√≠r"; /* Etiqueta para mayor claridad */
        margin-right: 5px;
    }

    /* Bot√≥n de Micr√≥fono (Grabar - VERDE) - Mantenidos por la secci√≥n anterior */
    .mic-button {
        background-color: #28a745; 
        border: none;
        border-radius: 5px;
        padding: 8px 12px;
        cursor: pointer;
        color: white;
        font-weight: bold;
        font-size: 1em;
        flex-shrink: 0;
    }
    .mic-button:hover {
        background-color: #218838; 
    }
    .mic-button::before {
        content: "üé§ Grabar"; /* Etiqueta para mayor claridad */
        margin-right: 5px;
    }

    /* Retroalimentaci√≥n de voz */
    .feedback {
        font-size: 0.9em;
        margin-left: 6px;
        flex-grow: 1; 
    }

    .feedback.ok {
        color: green;
        font-weight: bold;
    }
    .feedback.retry {
        color: red;
    }
</style>
</head>

<body>

<div class="lesson-container">

    <h2>EJERCICIOS ‚Äì VERBOS CON CAMBIO VOC√ÅLICO</h2>

    <p class="explanation">Practica la conjugaci√≥n de los siguientes verbos. Primero, haz clic en el bot√≥n azul (üîä) para escuchar la pronunciaci√≥n. Luego, haz clic en el bot√≥n verde (üé§) y repite la palabra para verificar tu pronunciaci√≥n.</p>

    <div class="verb-section">
        <h3>Verbo PODER (O ‚Üí UE)</h3>
        <ul class="verb-conjugation-list">
            <li>(yo) puedo 
                <button class="play-button" data-text="puedo" data-audio="assets/audio/unidad5/poder/puedo.mp3"></button>
                <button class="mic-button"></button>
                <span class="feedback"></span>
            </li>
            <li>(t√∫) puedes 
                <button class="play-button" data-text="puedes" data-audio="assets/audio/unidad5/poder/puedes.mp3"></button>
                <button class="mic-button"></button>
                <span class="feedback"></span>
            </li>
            <li>(√©l, ella, usted) puede 
                <button class="play-button" data-text="puede" data-audio="assets/audio/unidad5/poder/puede.mp3"></button>
                <button class="mic-button"></button>
                <span class="feedback"></span>
            </li>
            <li>(nosotros/as) podemos 
                <button class="play-button" data-text="podemos" data-audio="assets/audio/unidad5/poder/podemos.mp3"></button>
                <button class="mic-button"></button>
                <span class="feedback"></span>
            </li>
            <li>(vosotros/as) pod√©is 
                <button class="play-button" data-text="pod√©is" data-audio="assets/audio/unidad5/poder/podeis.mp3"></button>
                <button class="mic-button"></button>
                <span class="feedback"></span>
            </li>
            <li>(ellos/as, ustedes) pueden 
                <button class="play-button" data-text="pueden" data-audio="assets/audio/unidad5/poder/pueden.mp3"></button>
                <button class="mic-button"></button>
                <span class="feedback"></span>
            </li>
        </ul>
    </div>

    <div class="verb-section">
        <h3>Verbo DORMIR (O ‚Üí UE)</h3>
        <ul class="verb-conjugation-list">
            <li>(yo) duermo 
                <button class="play-button" data-text="duermo" data-audio="assets/audio/unidad5/dormir/duermo.mp3"></button>
                <button class="mic-button"></button>
                <span class="feedback"></span>
            </li>
            <li>(t√∫) duermes 
                <button class="play-button" data-text="duermes" data-audio="assets/audio/unidad5/dormir/duermes.mp3"></button>
                <button class="mic-button"></button>
                <span class="feedback"></span>
            </li>
            <li>(√©l, ella, usted) duerme 
                <button class="play-button" data-text="duerme" data-audio="assets/audio/unidad5/dormir/duerme.mp3"></button>
                <button class="mic-button"></button>
                <span class="feedback"></span>
            </li>
            <li>(nosotros/as) dormimos 
                <button class="play-button" data-text="dormimos" data-audio="assets/audio/unidad5/dormir/dormimos.mp3"></button>
                <button class="mic-button"></button>
                <span class="feedback"></span>
            </li>
            <li>(vosotros/as) dorm√≠s 
                <button class="play-button" data-text="dorm√≠s" data-audio="assets/audio/unidad5/dormir/dormis.mp3"></button>
                <button class="mic-button"></button>
                <span class="feedback"></span>
            </li>
            <li>(ellos/as, ustedes) duermen 
                <button class="play-button" data-text="duermen" data-audio="assets/audio/unidad5/dormir/duermen.mp3"></button>
                <button class="mic-button"></button>
                <span class="feedback"></span>
            </li>
        </ul>
    </div>

    <div class="verb-section">
        <h3>Verbo CERRAR (E ‚Üí IE)</h3>
        <ul class="verb-conjugation-list">
            <li>(yo) cierro 
                <button class="play-button" data-text="cierro" data-audio="assets/audio/unidad5/cerrar/cierro.mp3"></button>
                <button class="mic-button"></button>
                <span class="feedback"></span>
            </li>
            <li>(t√∫) cierras 
                <button class="play-button" data-text="cierras" data-audio="assets/audio/unidad5/cerrar/cierras.mp3"></button>
                <button class="mic-button"></button>
                <span class="feedback"></span>
            </li>
            <li>(√©l, ella, usted) cierra 
                <button class="play-button" data-text="cierra" data-audio="assets/audio/unidad5/cerrar/cierra.mp3"></button>
                <button class="mic-button"></button>
                <span class="feedback"></span>
            </li>
            <li>(nosotros/as) cerramos 
                <button class="play-button" data-text="cerramos" data-audio="assets/audio/unidad5/cerrar/cerramos.mp3"></button>
                <button class="mic-button"></button>
                <span class="feedback"></span>
            </li>
            <li>(vosotros/as) cerr√°is 
                <button class="play-button" data-text="cerr√°is" data-audio="assets/audio/unidad5/cerrar/cerrais.mp3"></button>
                <button class="mic-button"></button>
                <span class="feedback"></span>
            </li>
            <li>(ellos/as, ustedes) cierran 
                <button class="play-button" data-text="cierran" data-audio="assets/audio/unidad5/cerrar/cierran.mp3"></button>
                <button class="mic-button"></button>
                <span class="feedback"></span>
            </li>
        </ul>
    </div>
    
    <div class="verb-section">
        <h3>Verbo QUERER (E ‚Üí IE)</h3>
        <ul class="verb-conjugation-list">
            <li>(yo) quiero 
                <button class="play-button" data-text="quiero" data-audio="assets/audio/unidad5/querer/quiero.mp3"></button>
                <button class="mic-button"></button>
                <span class="feedback"></span>
            </li>
            <li>(t√∫) quieres 
                <button class="play-button" data-text="quieres" data-audio="assets/audio/unidad5/querer/quieres.mp3"></button>
                <button class="mic-button"></button>
                <span class="feedback"></span>
            </li>
            <li>(√©l, ella, usted) quiere 
                <button class="play-button" data-text="quiere" data-audio="assets/audio/unidad5/querer/quiere.mp3"></button>
                <button class="mic-button"></button>
                <span class="feedback"></span>
            </li>
            <li>(nosotros/as) queremos 
                <button class="play-button" data-text="queremos" data-audio="assets/audio/unidad5/querer/queremos.mp3"></button>
                <button class="mic-button"></button>
                <span class="feedback"></span>
            </li>
            <li>(vosotros/as) quer√©is 
                <button class="play-button" data-text="quer√©is" data-audio="assets/audio/unidad5/querer/quereis.mp3"></button>
                <button class="mic-button"></button>
                <span class="feedback"></span>
            </li>
            <li>(ellos/as, ustedes) quieren 
                <button class="play-button" data-text="quieren" data-audio="assets/audio/unidad5/querer/quieren.mp3"></button>
                <button class="mic-button"></button>
                <span class="feedback"></span>
            </li>
        </ul>
    </div>
    
    <div class="verb-section">
        <h3>Verbo PREFERIR (E ‚Üí IE)</h3>
        <ul class="verb-conjugation-list">
            <li>(yo) prefiero 
                <button class="play-button" data-text="prefiero" data-audio="assets/audio/unidad5/preferir/prefiero.mp3"></button>
                <button class="mic-button"></button>
                <span class="feedback"></span>
            </li>
            <li>(t√∫) prefieres 
                <button class="play-button" data-text="prefieres" data-audio="assets/audio/unidad5/preferir/prefieres.mp3"></button>
                <button class="mic-button"></button>
                <span class="feedback"></span>
            </li>
            <li>(√©l, ella, usted) prefiere 
                <button class="play-button" data-text="prefiere" data-audio="assets/audio/unidad5/preferir/prefiere.mp3"></button>
                <button class="mic-button"></button>
                <span class="feedback"></span>
            </li>
            <li>(nosotros/as) preferimos 
                <button class="play-button" data-text="preferimos" data-audio="assets/audio/unidad5/preferir/preferimos.mp3"></button>
                <button class="mic-button"></button>
                <span class="feedback"></span>
            </li>
            <li>(vosotros/as) prefer√≠s 
                <button class="play-button" data-text="prefer√≠s" data-audio="assets/audio/unidad5/preferir/preferis.mp3"></button>
                <button class="mic-button"></button>
                <span class="feedback"></span>
            </li>
            <li>(ellos/as, ustedes) prefieren 
                <button class="play-button" data-text="prefieren" data-audio="assets/audio/unidad5/preferir/prefieren.mp3"></button>
                <button class="mic-button"></button>
                <span class="feedback"></span>
            </li>
        </ul>
    </div>

    <hr>


<section class="exercise-section">
    <h3>EJERCICIO 1.2: Elige la forma correcta del verbo</h3>

    <p class="explanation">Selecciona la conjugaci√≥n correcta del verbo para completar la frase. ¬°Recuerda los cambios voc√°licos y las formas irregulares!</p>

    <ol class="exercise-list-multiple-choice" id="ej1-2-list">
        <li>Mi hermano (JUGAR) **JUEGA** todos los d√≠as en el jard√≠n.</li>
        
        <li data-correct-answer="quiere">
            <p>2.- El maestro (QUERER) **______** ver todos los d√≠as los deberes de los estudiantes.</p>
            <div class="options-container" data-verb-id="q1">
                <button class="mc-button" onclick="checkMultipleChoice(this, 'quere')">quere</button>
                <button class="mc-button" onclick="checkMultipleChoice(this, 'quer√©is')">quer√©is</button>
                <button class="mc-button" onclick="checkMultipleChoice(this, 'quiere')">quiere</button> 
            </div>
            <span class="feedback"></span>
        </li>

        <li data-correct-answer="oigo">
            <p>3.- No (O√çR, YO) **______** nada en absoluto: creo que no hay nadie en su casa.</p>
            <div class="options-container" data-verb-id="o1">
                <button class="mc-button" onclick="checkMultipleChoice(this, 'oio')">oio</button>
                <button class="mc-button" onclick="checkMultipleChoice(this, 'oigo')">oigo</button>
                <button class="mc-button" onclick="checkMultipleChoice(this, 'oimos')">o√≠mos</button> 
            </div>
            <span class="feedback"></span>
        </li>

        <li data-correct-answer="vais">
            <p>4.- ¬ø(IR) **______** vosotros a clase hoy?</p>
            <div class="options-container" data-verb-id="i1">
                <button class="mc-button" onclick="checkMultipleChoice(this, 'van')">van</button>
                <button class="mc-button" onclick="checkMultipleChoice(this, 'v√°is')">v√°is</button>
                <button class="mc-button" onclick="checkMultipleChoice(this, 'vais')">vais</button> 
            </div>
            <span class="feedback"></span>
        </li>

        <li data-correct-answer="viene, tengo">
            <p>5.- Mi abuela (VENIR) **______** a Salamanca el mes pr√≥ximo, y (TENER, YO) **______** que visitar con ella todos los monumentos de la ciudad.</p>
            
            <div class="options-container" data-verb-id="v1">
                **Verbo 1 (VENIR):**
                <button class="mc-button" onclick="checkMultipleChoice(this, 'viena')">viena</button>
                <button class="mc-button" onclick="checkMultipleChoice(this, 'ven')">ven</button>
                <button class="mc-button" onclick="checkMultipleChoice(this, 'viene')">viene</button> 
            </div>
            
            <div class="options-container" data-verb-id="t1">
                **Verbo 2 (TENER):**
                <button class="mc-button" onclick="checkMultipleChoice(this, 'tengo')">tengo</button>
                <button class="mc-button" onclick="checkMultipleChoice(this, 'tienes')">tienes</button>
                <button class="mc-button" onclick="checkMultipleChoice(this, 'tieno')">tieno</button> 
            </div>
            <span class="feedback"></span>
        </li>

        <li data-correct-answer="calienta">
            <p>6.- Mi madre (CALENTAR) **______** todos los d√≠as un litro de leche para preparar el caf√© de toda la familia.</p>
            <div class="options-container" data-verb-id="ca1">
                <button class="mc-button" onclick="checkMultipleChoice(this, 'calienta')">calienta</button>
                <button class="mc-button" onclick="checkMultipleChoice(this, 'calentamos')">calentamos</button>
                <button class="mc-button" onclick="checkMultipleChoice(this, 'calenta')">calenta</button> 
            </div>
            <span class="feedback"></span>
        </li>

        <li data-correct-answer="pensamos">
            <p>7.- Nosotros (PENSAR) **______** que ser√° mejor ir al cine y no a la piscina porque hace fr√≠o.</p>
            <div class="options-container" data-verb-id="p1">
                <button class="mc-button" onclick="checkMultipleChoice(this, 'piensamos')">piensamos</button>
                <button class="mc-button" onclick="checkMultipleChoice(this, 'pensamos')">pensamos</button>
                <button class="mc-button" onclick="checkMultipleChoice(this, 'piensan')">piensan</button> 
            </div>
            <span class="feedback"></span>
        </li>

        <li data-correct-answer="muestra">
            <p>8.- La chica de la tienda (MOSTRAR) **______** la falda a la se√±ora.</p>
            <div class="options-container" data-verb-id="m1">
                <button class="mc-button" onclick="checkMultipleChoice(this, 'mostra')">mostra</button>
                <button class="mc-button" onclick="checkMultipleChoice(this, 'muestra')">muestra</button>
                <button class="mc-button" onclick="checkMultipleChoice(this, 'muestran')">muestran</button> 
            </div>
            <span class="feedback"></span>
        </li>

        <li data-correct-answer="entienden">
            <p>9.- Esos estudiantes no (ENTENDER) **______** a la profesora porque est√°n ablando siempre.</p>
            <div class="options-container" data-verb-id="en1">
                <button class="mc-button" onclick="checkMultipleChoice(this, 'entendemos')">entendemos</button>
                <button class="mc-button" onclick="checkMultipleChoice(this, 'entienden')">entienden</button>
                <button class="mc-button" onclick="checkMultipleChoice(this, 'endenten')">endenten</button> 
            </div>
            <span class="feedback"></span>
        </li>

        <li data-correct-answer="huelen">
            <p>10.- Las flores del campo (OLER) **______** muy bien.</p>
            <div class="options-container" data-verb-id="ol1">
                <button class="mc-button" onclick="checkMultipleChoice(this, 'huelan')">huelan</button>
                <button class="mc-button" onclick="checkMultipleChoice(this, 'olen')">olen</button>
                <button class="mc-button" onclick="checkMultipleChoice(this, 'huelen')">huelen</button> 
            </div>
            <span class="feedback"></span>
        </li>

        <li data-correct-answer="se divierten">
            <p>11.- Mis amigos (DIVERTIRSE) **______** mucho cuando salen por la noche.</p>
            <div class="options-container" data-verb-id="di1">
                <button class="mc-button" onclick="checkMultipleChoice(this, 'se divierten')">se divierten</button>
                <button class="mc-button" onclick="checkMultipleChoice(this, 'se diverten')">se diverten</button>
                <button class="mc-button" onclick="checkMultipleChoice(this, 'divierten')">divierten</button> 
            </div>
            <span class="feedback"></span>
        </li>

        <li data-correct-answer="pedimos">
            <p>12.- Nosotros (PEDIR) **______** una semana de vacaciones.</p>
            <div class="options-container" data-verb-id="ped1">
                <button class="mc-button" onclick="checkMultipleChoice(this, 'pedimos')">pedimos</button>
                <button class="mc-button" onclick="checkMultipleChoice(this, 'pidimos')">pidimos</button>
                <button class="mc-button" onclick="checkMultipleChoice(this, 'piden')">piden</button> 
            </div>
            <span class="feedback"></span>
        </li>
        
        <li data-correct-answer="dice, caben">
            <p>13.- Mi madre (DECIR) **______** que todas estas maletas no (CABER) **______** en el coche.</p>
            
            <div class="options-container" data-verb-id="de1">
                **Verbo 1 (DECIR):**
                <button class="mc-button" onclick="checkMultipleChoice(this, 'dice')">dice</button>
                <button class="mc-button" onclick="checkMultipleChoice(this, 'dece')">dece</button>
                <button class="mc-button" onclick="checkMultipleChoice(this, 'digo')">digo</button> 
            </div>
            
            <div class="options-container" data-verb-id="cab1">
                **Verbo 2 (CABER):**
                <button class="mc-button" onclick="checkMultipleChoice(this, 'caben')">caben</button>
                <button class="mc-button" onclick="checkMultipleChoice(this, 'caban')">caban</button>
                <button class="mc-button" onclick="checkMultipleChoice(this, 'cabemos')">cabemos</button> 
            </div>
            <span class="feedback"></span>
        </li>

        <li data-correct-answer="hacemos">
            <p>14.- (HACER, NOSOTROS) **______** los deberes ma√±ana por la ma√±ana, ¬øno?</p>
            <div class="options-container" data-verb-id="ha1">
                <button class="mc-button" onclick="checkMultipleChoice(this, 'hac√©is')">hac√©is</button>
                <button class="mc-button" onclick="checkMultipleChoice(this, 'hacemos')">hacemos</button>
                <button class="mc-button" onclick="checkMultipleChoice(this, 'hacen')">hacen</button> 
            </div>
            <span class="feedback"></span>
        </li>

        <li data-correct-answer="puedo, tengo">
            <p>15.- No (PODER, YO) **______** comprar tu regalo, porque (TENER) **______** demasiadas cosas para hacer en casa.</p>
            
            <div class="options-container" data-verb-id="po1">
                **Verbo 1 (PODER):**
                <button class="mc-button" onclick="checkMultipleChoice(this, 'podemos')">podemos</button>
                <button class="mc-button" onclick="checkMultipleChoice(this, 'puedo')">puedo</button>
                <button class="mc-button" onclick="checkMultipleChoice(this, 'podo')">podo</button> 
            </div>
            
            <div class="options-container" data-verb-id="t2">
                **Verbo 2 (TENER):**
                <button class="mc-button" onclick="checkMultipleChoice(this, 'tienes')">tienes</button>
                <button class="mc-button" onclick="checkMultipleChoice(this, 'tengo')">tengo</button>
                <button class="mc-button" onclick="checkMultipleChoice(this, 'tieno')">tieno</button> 
            </div>
            <span class="feedback"></span>
        </li>
        
        <li data-correct-answer="podemos, quieren">
            <p>16.- S√≠, (PODER, NOSOTROS) **______** poner m√°s dinero que el a√±o pasado, pero no s√© si los dem√°s amigos (QUERER) **______** hacerlo.</p>
            
            <div class="options-container" data-verb-id="po2">
                **Verbo 1 (PODER):**
                <button class="mc-button" onclick="checkMultipleChoice(this, 'puedemos')">puedemos</button>
                <button class="mc-button" onclick="checkMultipleChoice(this, 'podemos')">podemos</button>
                <button class="mc-button" onclick="checkMultipleChoice(this, 'pueden')">pueden</button> 
            </div>
            
            <div class="options-container" data-verb-id="q2">
                **Verbo 2 (QUERER):**
                <button class="mc-button" onclick="checkMultipleChoice(this, 'quieremos')">quieremos</button>
                <button class="mc-button" onclick="checkMultipleChoice(this, 'quieren')">quieren</button>
                <button class="mc-button" onclick="checkMultipleChoice(this, 'queren')">queren</button> 
            </div>
            <span class="feedback"></span>
        </li>
    </ol>
</section>


<hr>
    
</div>

<script>
    // Configuraci√≥n del Reconocimiento de Voz (WebkitSpeechRecognition)
    const recognition = new (window.SpeechRecognition || window.webkitSpeechRecognition)();
    recognition.lang = 'es-ES';
    recognition.interimResults = false;
    recognition.maxAlternatives = 1;

    // Funci√≥n que reproduce el audio de manera segura
    function playAudio(src) {
        const audio = new Audio(src);
        audio.play().catch(error => {
            console.error("‚ùå Error de reproducci√≥n de audio. Comprueba la ruta:", src, error);
            alert("No se pudo reproducir el audio. Revisa la consola del navegador (F12) o verifica la ruta.");
        });
    }

    // Listener unificado para todos los botones de audio (.play-button)
    document.querySelectorAll('.play-button').forEach(btn => {
        btn.addEventListener('click', () => {
            const audioSrc = btn.dataset.audio;
            if (audioSrc) {
                playAudio(audioSrc);
            } else {
                console.warn("No se encontr√≥ una ruta de audio v√°lida para este bot√≥n.");
            }
        });
    });

    // Listener para los botones de micr√≥fono (usa la l√≥gica de verificaci√≥n que te funciona)
    document.querySelectorAll('.mic-button').forEach(micBtn => {
        micBtn.addEventListener('click', () => {
            const parent = micBtn.closest('li');
            
            // Usa data-text del bot√≥n .play-button asociado
            const playBtn = parent.querySelector('.play-button');
            const expectedText = playBtn ? playBtn.dataset.text.toLowerCase() : ""; // Usamos min√∫sculas
            
            const feedback = parent.querySelector('.feedback');
            
            if (!expectedText) {
                 feedback.textContent = "‚ö†Ô∏è Error: Falta el texto esperado (data-text) en el bot√≥n de audio.";
                 feedback.className = "feedback retry";
                 return;
            }
            
            feedback.textContent = "üéôÔ∏è Escuchando...";
            feedback.className = "feedback";
            micBtn.disabled = true;

            recognition.start();

            recognition.onresult = (event) => {
                const rawSaid = event.results[0][0].transcript;
                const said = rawSaid.toLowerCase(); // Usamos min√∫sculas
                
                // Criterio que te funciona: Si la transcripci√≥n incluye el texto esperado
                if (said.includes(expectedText)) {
                    feedback.textContent = "‚úÖ Bien hecho (" + rawSaid + ")";
                    feedback.className = "feedback ok";
                } else {
                    feedback.textContent = "üîÅ Dijo: '" + rawSaid + "' ‚Äî Intenta de nuevo";
                    feedback.className = "feedback retry";
                }
            };
            
            recognition.onend = () => {
                micBtn.disabled = false; // Habilita el bot√≥n al finalizar
                if(feedback.textContent.includes('Escuchando')) {
                    feedback.textContent = "‚ö†Ô∏è No se detect√≥ voz. Intenta de nuevo.";
                    feedback.className = "feedback retry";
                }
            };

            recognition.onerror = (event) => {
                let errorMsg = "‚ö†Ô∏è Error al usar el micr√≥fono";
                if (event.error === 'not-allowed') {
                    errorMsg = "‚ö†Ô∏è Acceso denegado. Permite el micr√≥fono.";
                } else if (event.error === 'no-speech') {
                    errorMsg = "‚ö†Ô∏è No se detect√≥ voz.";
                }
                feedback.textContent = errorMsg;
                feedback.className = "feedback retry";
                micBtn.disabled = false;
                console.error("Speech Recognition Error:", event.error);
            };
        });
    });
   // NUEVA FUNCI√ìN PARA EL EJERCICIO DE OPCI√ìN M√öLTIPLE
function checkMultipleChoice(clickedButton, buttonValue) {
    const parentLi = clickedButton.closest('li');
    // Buscamos solo los botones dentro del contenedor actual para manejar frases con dos huecos.
    const currentOptionsContainer = clickedButton.closest('.options-container'); 
    const buttonsInCurrentContainer = currentOptionsContainer.querySelectorAll('.mc-button');
    
    const feedbackSpan = parentLi.querySelector('.feedback');
    const fullExpectedAnswer = parentLi.getAttribute('data-correct-answer');
    
    // El 'buttonValue' es el texto del bot√≥n clicado (ej: 'quiere', 'quere', 'quer√©is').
    // Buscamos si ese valor est√° dentro de las respuestas esperadas para la frase completa.
    const expectedForThisHole = fullExpectedAnswer.split(', ').find(answer => answer === buttonValue);

    // 1. Limpiar el estado de error de los botones en este contenedor
    buttonsInCurrentContainer.forEach(btn => {
        btn.classList.remove('incorrect');
    });

    // 2. Comprobar la respuesta del bot√≥n clicado
    if (expectedForThisHole) {
        
        // --- RESPUESTA CORRECTA ---
        clickedButton.classList.add('correct');
        
        // Deshabilita todos los botones en este contenedor despu√©s de una respuesta correcta
        buttonsInCurrentContainer.forEach(btn => {
            btn.disabled = true;
        });
        
        // Contar cu√°ntos huecos hemos completado en la frase completa
        const allCorrectButtons = parentLi.querySelectorAll('.mc-button.correct');
        const totalVerbosEnFrase = fullExpectedAnswer.split(',').length;

        if (allCorrectButtons.length === totalVerbosEnFrase) {
            // Si todos los verbos est√°n correctos (simple o doble)
            feedbackSpan.textContent = "‚úÖ ¬°Correcto! Todos los huecos completados.";
            feedbackSpan.className = "feedback ok";
        } else {
            // Si a√∫n falta un verbo (solo ocurre en frases con dos verbos)
            feedbackSpan.textContent = "‚úÖ Correcto. Contin√∫a con el siguiente verbo.";
            feedbackSpan.className = "feedback ok";
        }
        
    } else {
        
        // --- RESPUESTA INCORRECTA ---
        clickedButton.classList.add('incorrect');
        feedbackSpan.textContent = `‚ùå Incorrecto. Intenta de nuevo.`;
        feedbackSpan.className = "feedback retry";
    }
}
</script>

</body>
</html>
