<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Unidad 5.1 â€“ Verbos con cambio vocÃ¡lico</title>
  <script src="menu.js" defer></script>

  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 0;
      padding: 0;
      background-color: #f4f4f9;
      color: #333;
    }

    .lesson-container {
      max-width: 900px;
      margin: 80px auto 25px auto;
      padding: 25px;
      background: white;
      border-radius: 12px;
      box-shadow: 0 6px 15px rgba(0,0,0,0.15);
    }

    h2, h3 {
      color: #007bff;
      border-bottom: 2px solid #007bff;
      padding-bottom: 4px;
    }

    ul {
      list-style: none;
      padding: 0;
    }

    li {
      margin: 6px 0;
      display: flex;
      align-items: center;
      gap: 6px;
    }

    .play-button, .mic-button {
      border: none;
      border-radius: 5px;
      padding: 6px 10px;
      cursor: pointer;
      color: white;
      font-weight: bold;
    }

    .play-button {
      background-color: #28a745;
    }
    .play-button:hover {
      background-color: #218838;
    }

    .mic-button {
      background-color: #007bff;
    }
    .mic-button:hover {
      background-color: #0056b3;
    }

    .feedback {
      font-size: 0.9em;
      margin-left: 6px;
    }

    .feedback.ok {
      color: green;
      font-weight: bold;
    }
    .feedback.retry {
      color: red;
    }

    p.explanation {
      font-style: italic;
      color: #555;
      margin-bottom: 15px;
    }
  </style>
</head>
<body>

<div class="lesson-container">
  <h2>UNIDAD 5.1 â€” Verbos con cambio vocÃ¡lico</h2>

  <h3>Verbo PODER (O â†’ UE)</h3>
  <ul>
    <li>(yo) puedo 
      <button class="play-button" data-text="puedo" data-audio="assets/audio/unidad5/poder/puedo.mp3">ğŸ”Š</button>
      <button class="mic-button">ğŸ¤</button>
      <span class="feedback"></span>
    </li>
    <li>(tÃº) puedes 
      <button class="play-button" data-text="puedes" data-audio="assets/audio/unidad5/poder/puedes.mp3">ğŸ”Š</button>
      <button class="mic-button">ğŸ¤</button>
      <span class="feedback"></span>
    </li>
    <li>(Ã©l, ella, usted) puede</li>
    <li>(nosotros/as) podemos</li>
    <li>(vosotros/as) podÃ©is</li>
    <li>(ellos/as, ustedes) pueden</li>
  </ul>
  <p class="explanation">Algunos verbos cambian la <b>O</b> de la raÃ­z por <b>UE</b> si es tÃ³nica.</p>

  <h3>Verbo DORMIR (O â†’ UE)</h3>
  <ul>
    <li>(yo) duermo 
      <button class="play-button" data-text="duermo" data-audio="assets/audio/unidad5/dormir/duermo.mp3">ğŸ”Š</button>
      <button class="mic-button">ğŸ¤</button>
      <span class="feedback"></span>
    </li>
    <li>(tÃº) duermes 
      <button class="play-button" data-text="duermes" data-audio="assets/audio/unidad5/dormir/duermes.mp3">ğŸ”Š</button>
      <button class="mic-button">ğŸ¤</button>
      <span class="feedback"></span>
    </li>
    <li>(Ã©l, ella, usted) duerme</li>
    <li>(nosotros/as) dormimos</li>
    <li>(vosotros/as) dormÃ­s</li>
    <li>(ellos/as, ustedes) duermen</li>
  </ul>
  <p class="explanation">Algunos verbos cambian la <b>O</b> de la raÃ­z por <b>UE</b> si es tÃ³nica.</p>

  <h3>Verbo CERRAR (E â†’ IE)</h3>
  <ul>
    <li>(yo) cierro 
      <button class="play-button" data-text="cierro" data-audio="assets/audio/unidad5/cerrar/cierro.mp3">ğŸ”Š</button>
      <button class="mic-button">ğŸ¤</button>
      <span class="feedback"></span>
    </li>
    <li>(tÃº) cierras 
      <button class="play-button" data-text="cierras" data-audio="assets/audio/unidad5/cerrar/cierras.mp3">ğŸ”Š</button>
      <button class="mic-button">ğŸ¤</button>
      <span class="feedback"></span>
    </li>
    <li>(Ã©l, ella, usted) cierra</li>
    <li>(nosotros/as) cerramos</li>
    <li>(vosotros/as) cerrÃ¡is</li>
    <li>(ellos/as, ustedes) cierran</li>
  </ul>
  <p class="explanation">Algunos verbos cambian la <b>E</b> de la raÃ­z por <b>IE</b> si es tÃ³nica.</p>

  <h3>Verbo QUERER (E â†’ IE)</h3>
  <ul>
    <li>(yo) quiero 
      <button class="play-button" data-text="quiero" data-audio="assets/audio/unidad5/querer/quiero.mp3">ğŸ”Š</button>
      <button class="mic-button">ğŸ¤</button>
      <span class="feedback"></span>
    </li>
    <li>(tÃº) quieres 
      <button class="play-button" data-text="quieres" data-audio="assets/audio/unidad5/querer/quieres.mp3">ğŸ”Š</button>
      <button class="mic-button">ğŸ¤</button>
      <span class="feedback"></span>
    </li>
    <li>(Ã©l, ella, usted) quiere</li>
    <li>(nosotros/as) queremos</li>
    <li>(vosotros/as) querÃ©is</li>
    <li>(ellos/as, ustedes) quieren</li>
  </ul>

  <h3>Verbo PREFERIR (E â†’ IE)</h3>
  <ul>
    <li>(yo) prefiero 
      <button class="play-button" data-text="prefiero" data-audio="assets/audio/unidad5/preferir/prefiero.mp3">ğŸ”Š</button>
      <button class="mic-button">ğŸ¤</button>
      <span class="feedback"></span>
    </li>
    <li>(tÃº) prefieres 
      <button class="play-button" data-text="prefieres" data-audio="assets/audio/unidad5/preferir/prefieres.mp3">ğŸ”Š</button>
      <button class="mic-button">ğŸ¤</button>
      <span class="feedback"></span>
    </li>
    <li>(Ã©l, ella, usted) prefiere</li>
    <li>(nosotros/as) preferimos</li>
    <li>(vosotros/as) preferÃ­s</li>
    <li>(ellos/as, ustedes) prefieren</li>
  </ul>
</div>

<script>
// Reproducir audio
document.querySelectorAll('.play-button').forEach(btn => {
  btn.addEventListener('click', () => {
    const audio = new Audio(btn.dataset.audio);
    audio.play();
  });
});

// Reconocimiento de voz
const recognition = new (window.SpeechRecognition || window.webkitSpeechRecognition)();
recognition.lang = 'es-ES';
recognition.interimResults = false;

document.querySelectorAll('.mic-button').forEach(micBtn => {
  micBtn.addEventListener('click', () => {
    const parent = micBtn.closest('li');
    const expectedText = parent.querySelector('.play-button').dataset.text.toLowerCase();
    const feedback = parent.querySelector('.feedback');
    feedback.textContent = "ğŸ™ï¸ Escuchando...";
    feedback.className = "feedback";

    recognition.start();

    recognition.onresult = (event) => {
      const said = event.results[0][0].transcript.toLowerCase();
      if (said.includes(expectedText)) {
        feedback.textContent = "âœ… Bien hecho (" + said + ")";
        feedback.className = "feedback ok";
      } else {
        feedback.textContent = "ğŸ” Dijo: '" + said + "' â€” Intenta de nuevo";
        feedback.className = "feedback retry";
      }
    };

    recognition.onerror = () => {
      feedback.textContent = "âš ï¸ Error al usar el micrÃ³fono";
      feedback.className = "feedback retry";
    };
  });
});
</script>

</body>
</html>
