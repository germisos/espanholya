<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Unidad 5.1 – Verbos con cambio vocálico</title>
  <script src="menu.js" defer></script>

  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 0;
      padding: 0;
      background-color: #f4f4f9;
      color: #333;
    }

    .lesson-container {
      max-width: 900px;
      margin: 80px auto 25px auto;
      padding: 25px;
      background: white;
      border-radius: 12px;
      box-shadow: 0 6px 15px rgba(0,0,0,0.15);
    }

    h2, h3 {
      color: #007bff;
      border-bottom: 2px solid #007bff;
      padding-bottom: 4px;
    }

    ul {
      list-style: none;
      padding: 0;
    }

    li {
      margin: 6px 0;
      display: flex;
      align-items: center;
      gap: 6px;
    }

    .play-button, .mic-button {
      border: none;
      border-radius: 5px;
      padding: 6px 10px;
      cursor: pointer;
      color: white;
      font-weight: bold;
    }

    .play-button {
      background-color: #28a745;
    }
    .play-button:hover {
      background-color: #218838;
    }

    .mic-button {
      background-color: #007bff;
    }
    .mic-button:hover {
      background-color: #0056b3;
    }

    .feedback {
      font-size: 0.9em;
      margin-left: 6px;
    }

    .feedback.ok {
      color: green;
      font-weight: bold;
    }
    .feedback.retry {
      color: red;
    }

    p.explanation {
      font-style: italic;
      color: #555;
      margin-bottom: 15px;
    }
  </style>
</head>
<body>

<div class="lesson-container">
  <h2>UNIDAD 5.1 — Verbos con cambio vocálico</h2>

  <h3>Verbo PODER (O → UE)</h3>
  <ul>
    <li>(yo) puedo <button class="play-button" data-text="puedo" data-audio="assets/audio/unidad5/poder/puedo.mp3">🔊</button><button class="mic-button">🎤</button><span class="feedback"></span></li>
    <li>(tú) puedes <button class="play-button" data-text="puedes" data-audio="assets/audio/unidad5/poder/puedes.mp3">🔊</button><button class="mic-button">🎤</button><span class="feedback"></span></li>
    <li>(él, ella, usted) puede <button class="play-button" data-text="puede" data-audio="assets/audio/unidad5/poder/puede.mp3">🔊</button><button class="mic-button">🎤</button><span class="feedback"></span></li>
    <li>(nosotros/as) podemos <button class="play-button" data-text="podemos" data-audio="assets/audio/unidad5/poder/podemos.mp3">🔊</button><button class="mic-button">🎤</button><span class="feedback"></span></li>
    <li>(vosotros/as) podéis <button class="play-button" data-text="podéis" data-audio="assets/audio/unidad5/poder/podeis.mp3">🔊</button><button class="mic-button">🎤</button><span class="feedback"></span></li>
    <li>(ellos/as, ustedes) pueden <button class="play-button" data-text="pueden" data-audio="assets/audio/unidad5/poder/pueden.mp3">🔊</button><button class="mic-button">🎤</button><span class="feedback"></span></li>
  </ul>
  <p class="explanation">Algunos verbos cambian la <b>O</b> de la raíz por <b>UE</b> si es tónica.</p>

  <h3>Verbo DORMIR (O → UE)</h3>
  <ul>
    <li>(yo) duermo <button class="play-button" data-text="duermo" data-audio="assets/audio/unidad5/dormir/duermo.mp3">🔊</button><button class="mic-button">🎤</button><span class="feedback"></span></li>
    <li>(tú) duermes <button class="play-button" data-text="duermes" data-audio="assets/audio/unidad5/dormir/duermes.mp3">🔊</button><button class="mic-button">🎤</button><span class="feedback"></span></li>
    <li>(él, ella, usted) duerme <button class="play-button" data-text="duerme" data-audio="assets/audio/unidad5/dormir/duerme.mp3">🔊</button><button class="mic-button">🎤</button><span class="feedback"></span></li>
    <li>(nosotros/as) dormimos <button class="play-button" data-text="dormimos" data-audio="assets/audio/unidad5/dormir/dormimos.mp3">🔊</button><button class="mic-button">🎤</button><span class="feedback"></span></li>
    <li>(vosotros/as) dormís <button class="play-button" data-text="dormís" data-audio="assets/audio/unidad5/dormir/dormis.mp3">🔊</button><button class="mic-button">🎤</button><span class="feedback"></span></li>
    <li>(ellos/as, ustedes) duermen <button class="play-button" data-text="duermen" data-audio="assets/audio/unidad5/dormir/duermen.mp3">🔊</button><button class="mic-button">🎤</button><span class="feedback"></span></li>
  </ul>

  <h3>Verbo CERRAR (E → IE)</h3>
  <ul>
    <li>(yo) cierro <button class="play-button" data-text="cierro" data-audio="assets/audio/unidad5/cerrar/cierro.mp3">🔊</button><button class="mic-button">🎤</button><span class="feedback"></span></li>
    <li>(tú) cierras <button class="play-button" data-text="cierras" data-audio="assets/audio/unidad5/cerrar/cierras.mp3">🔊</button><button class="mic-button">🎤</button><span class="feedback"></span></li>
    <li>(él, ella, usted) cierra <button class="play-button" data-text="cierra" data-audio="assets/audio/unidad5/cerrar/cierra.mp3">🔊</button><button class="mic-button">🎤</button><span class="feedback"></span></li>
    <li>(nosotros/as) cerramos <button class="play-button" data-text="cerramos" data-audio="assets/audio/unidad5/cerrar/cerramos.mp3">🔊</button><button class="mic-button">🎤</button><span class="feedback"></span></li>
    <li>(vosotros/as) cerráis <button class="play-button" data-text="cerráis" data-audio="assets/audio/unidad5/cerrar/cerrais.mp3">🔊</button><button class="mic-button">🎤</button><span class="feedback"></span></li>
    <li>(ellos/as, ustedes) cierran <button class="play-button" data-text="cierran" data-audio="assets/audio/unidad5/cerrar/cierran.mp3">🔊</button><button class="mic-button">🎤</button><span class="feedback"></span></li>
  </ul>

  <h3>Verbo QUERER (E → IE)</h3>
  <ul>
    <li>(yo) quiero <button class="play-button" data-text="quiero" data-audio="assets/audio/unidad5/querer/quiero.mp3">🔊</button><button class="mic-button">🎤</button><span class="feedback"></span></li>
    <li>(tú) quieres <button class="play-button" data-text="quieres" data-audio="assets/audio/unidad5/querer/quieres.mp3">🔊</button><button class="mic-button">🎤</button><span class="feedback"></span></li>
    <li>(él, ella, usted) quiere <button class="play-button" data-text="quiere" data-audio="assets/audio/unidad5/querer/quiere.mp3">🔊</button><button class="mic-button">🎤</button><span class="feedback"></span></li>
    <li>(nosotros/as) queremos <button class="play-button" data-text="queremos" data-audio="assets/audio/unidad5/querer/queremos.mp3">🔊</button><button class="mic-button">🎤</button><span class="feedback"></span></li>
    <li>(vosotros/as) queréis <button class="play-button" data-text="queréis" data-audio="assets/audio/unidad5/querer/quereis.mp3">🔊</button><button class="mic-button">🎤</button><span class="feedback"></span></li>
    <li>(ellos/as, ustedes) quieren <button class="play-button" data-text="quieren" data-audio="assets/audio/unidad5/querer/quieren.mp3">🔊</button><button class="mic-button">🎤</button><span class="feedback"></span></li>
  </ul>

  <h3>Verbo PREFERIR (E → IE)</h3>
  <ul>
    <li>(yo) prefiero <button class="play-button" data-text="prefiero" data-audio="assets/audio/unidad5/preferir/prefiero.mp3">🔊</button><button class="mic-button">🎤</button><span class="feedback"></span></li>
    <li>(tú) prefieres <button class="play-button" data-text="prefieres" data-audio="assets/audio/unidad5/preferir/prefieres.mp3">🔊</button><button class="mic-button">🎤</button><span class="feedback"></span></li>
    <li>(él, ella, usted) prefiere <button class="play-button" data-text="prefiere" data-audio="assets/audio/unidad5/preferir/prefiere.mp3">🔊</button><button class="mic-button">🎤</button><span class="feedback"></span></li>
    <li>(nosotros/as) preferimos <button class="play-button" data-text="preferimos" data-audio="assets/audio/unidad5/preferir/preferimos.mp3">🔊</button><button class="mic-button">🎤</button><span class="feedback"></span></li>
    <li>(vosotros/as) preferís <button class="play-button" data-text="preferís" data-audio="assets/audio/unidad5/preferir/preferis.mp3">🔊</button><button class="mic-button">🎤</button><span class="feedback"></span></li>
    <li>(ellos/as, ustedes) prefieren <button class="play-button" data-text="prefieren" data-audio="assets/audio/unidad5/preferir/prefieren.mp3">🔊</button><button class="mic-button">🎤</button><span class="feedback"></span></li>
  </ul>
</div>

<script>
// Reproducir audio
document.querySelectorAll('.play-button').forEach(btn => {
  btn.addEventListener('click', () => {
    const audio = new Audio(btn.dataset.audio);
    audio.play();
  });
});

// Reconocimiento de voz
const recognition = new (window.SpeechRecognition || window.webkitSpeechRecognition)();
recognition.lang = 'es-ES';
recognition.interimResults = false;

document.querySelectorAll('.mic-button').forEach(micBtn => {
  micBtn.addEventListener('click', () => {
    const parent = micBtn.closest('li');
    const expectedText = parent.querySelector('.play-button').dataset.text.toLowerCase();
    const feedback = parent.querySelector('.feedback');
    feedback.textContent = "🎙️ Escuchando...";
    feedback.className = "feedback";

    recognition.start();

    recognition.onresult = (event) => {
      const said = event.results[0][0].transcript.toLowerCase();
      if (said.includes(expectedText)) {
        feedback.textContent = "✅ Bien hecho (" + said + ")";
        feedback.className = "feedback ok";
      } else {
        feedback.textContent = "🔁 Dijo: '" + said + "' — Intenta de nuevo";
        feedback.className = "feedback retry";
      }
    };

    recognition.onerror = () => {
      feedback.textContent = "⚠️ Error al usar el micrófono";
      feedback.className = "feedback retry";
    };
  });
});
</script>

</body>
</html>
